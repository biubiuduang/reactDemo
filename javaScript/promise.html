<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>promise</title>
</head>
<body>
<script>
    // Promise 基本用法 解决魔鬼回调问题

    var p = new Promise((resolve,reject)=>{
        //resolve 解决
        // resolve('10000');

        //reject  拒绝
        reject(new Error('reject....'));
    });
    p.then(data=>{console.log(data); return new Promise(resolve => resolve('20000'))})
        .then((data)=>console.log(data))
        .catch(err => console.log(err))
        .finally(()=>console.log('finally...'));

    //  Promise  setTimeout then
    //知识点：promise setTimeout then执行机制

    function p1(t){
        return new Promise((resolve,reject)=>{
            console.log('写在 setTimeout 前。。。');
            setTimeout(function(){
                resolve("setTimeout 执行完成了。。。")
            },t);
            console.log('写在 setTimeout 后。。。');
        })
    }

    p1(1000).then(data=>console.log(data));


    function p2(t){
        return new Promise((resolve,reject)=>{
            setTimeout(function(){
                resolve("Promise 执行成功！");
            },t)
        })
    }
    p2(1000).then(data=>console.log(data))

</script>
</body>
</html>